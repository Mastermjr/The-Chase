<!doctype html>
<html>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-storage.js"></script>

<script>
	
	var config = {
	
		projectId: "the-chase-9c245.appspot.com",
		storageBucket: "the-chase-9c245.appspot.com",
		databaseURL: "https://the-chase-9c245.firebaseio.com"
	
	};
	firebase.initializeApp(config);
	
	var ref = firebase.database().ref("leaderboard")
	ref.once("value").then(function(snapshot) {
	
		snapshot.forEach(function (map) {
		
			var str = map.child("user").val();
			console.log(str)
			console.log(str.length)
		
			appendTable = document.getElementById(map.key);
			appendTable.innerHTML += "<tr>"

			appendTable.innerHTML += "<td id=\"time\">"
			appendTable.innerHTML += "Time: "
			appendTable.innerHTML += map.child("time").val();
			appendTable.innerHTML += "</td>"
			
			appendTable.innerHTML += "<td>"
			appendTable.innerHTML += "User: "
			appendTable.innerHTML += map.child("user").val();
			appendTable.innerHTML += "</td>"
			
			appendTable.innerHTML += "</tr>"
			
		
		
			//appendTable.innerHTML += "</tr>"
		
		})
	})
	
	function placeHolderCheck(url) {

		if(!(url.includes("fff.png")))
		return true;
	}
	
	
	function loadImg1() {
	
		var storage = firebase.storage();
		var storageRef = storage.ref();
		var img1 = document.getElementById("mapImage1")
	
		console.log(img1.src)
	
		if (placeHolderCheck(img1.src)) {
		
			return;
		
		}
	
		storageRef.child("Maps/images/map1.jpg").getDownloadURL().then(function(url) {
	
			var test = url;
			console.log(test);
			img1.expanded = !img1.expanded || false;
			img1.src = test;
			
			return
	
		});
	};
	
	function loadImg2() {
	
		var storage = firebase.storage();
		var storageRef = storage.ref();
		var img2 = document.getElementById("mapImage2")
	
		console.log(img2.src)
	
		if (placeHolderCheck(img2.src)) {
		
			return
		
		}
	
		storageRef.child("Maps/images/map2.jpg").getDownloadURL().then(function(url) {
	
			var test = url;
			console.log(test);
			img2.expanded = !img2.expanded || false;
			img2.src = test;
	
			return
	
		});
	};
	
	function loadImg3() {
	
		var storage = firebase.storage();
		var storageRef = storage.ref();
		var img3 = document.getElementById("mapImage3")
	
		if (placeHolderCheck(img3.src)) {
		
			return
		
		}
	
		storageRef.child("Maps/images/map3.jpg").getDownloadURL().then(function(url) {
	
			var test = url;
			console.log(test);
			img3.src = test;
	
		});
	};
	
	
	

</script>
<head>
<meta charset="utf-8">
<title>the-chase</title>
<link href="leaderboard.css" rel="stylesheet">
</head>
<body>

<div id="bgimg">

	<img src = "images/gbimg.jpg" id = "Image4">

</div>

<div id="title" >
<img src="images/Picture2.png" id="Image3"></div>

<div id = "block1">

	<div id = "map1div" class="data">
		
		<img src="images/fff.png" id = "mapImage1" class = "mapImg" onload = "loadImg1()">
	
		<table id="map1" >
	
		
		</table>
	</div>
	<div id = "map2div" class="data">
	
		<img src = "images/fff.png" id = "mapImage2" class = "mapImg" onload = "loadImg2()">
	
		<table id="map2" >
	
		
		</table>
	</div>
	
	<div id = "map3div" class="data">
	
		<img src = "images/fff.png" id = "mapImage3" class = "mapImg" onload = "loadImg3()">
	
		<table id="map3" >
	
		
		</table>
	</div>
	
	<div id = "map4div" class="data">
	
		<img src = "images/fff.png" id = "mapImage4" class = "mapImg">
	
		<table id="map4" >
	
		
		</table>
	</div>
	
	<div id = "map5div" class="data">
	
		<img src = "images/fff.png" id = "mapImage5" class = "mapImg">
	
		<table id="map5" >
	
		
		</table>
	</div>
	
</div>


</body>
</html>
